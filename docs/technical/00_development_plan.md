# InnoLiber 技术开发计划文档

**版本**: v1.0
**创建日期**: 2025-10-28
**更新日期**: 2025-10-29
**状态**: 执行中

---

## 📋 项目概述

### 项目名称
**InnoLiber** - 科研基金申请智能助理系统

### 产品定位
- **类型**: 商业产品级别的AI Agent系统
- **目标用户**: 职业早期科研研究者（ECR）
- **核心价值**: 提升NSFC申请书质量，实现高能动性AI助理

### 技术特点
- **高能动性Agent**: 具备自主决策和建议能力
- **三大核心服务**: K-TAS（分析）+ SPG-S（生成）+ DDC-S（合规）
- **Monorepo架构**: 统一代码管理，静态分析友好
- **类型安全**: 全栈TypeScript/Python类型安全

---

## 🎯 技术栈决策（已确认）

### 后端技术栈
| 组件 | 选定技术 | 版本 | 确认状态 |
|------|---------|------|---------|
| **运行时** | Python | 3.11 | ✅ 确认 |
| **Web框架** | FastAPI | 0.118.2+ | ✅ 确认 |
| **数据库** | PostgreSQL | 16+ | ✅ 确认 |
| **向量搜索** | pgvector | 最新版 | ✅ 确认 |
| **数据库驱动** | asyncpg | 0.29+ | ✅ 确认 |
| **ORM** | SQLAlchemy | 2.0+ | ✅ 确认 |
| **AI推理** | PyTorch | 2.5.1 | ✅ 确认 |
| **LLM调用** | OpenAI SDK | 1.68+ | ✅ 确认 |
| **依赖管理** | Poetry | 最新版 | ✅ 确认 |

### 前端技术栈（已确认）
| 组件 | 选定技术 | 版本 | 确认状态 |
|------|---------|------|---------|
| **框架** | React | 18+ | ✅ 确认 |
| **类型系统** | TypeScript | 5+ | ✅ 确认 |
| **UI库** | Ant Design | 5+ | ✅ 确认 |
| **构建工具** | Vite | 5+ | ✅ 确认 |
| **状态管理** | Zustand | 4+ | ✅ 确认 |
| **表单处理** | React Hook Form + Zod | 最新版 | ✅ 确认 |
| **包管理** | npm/yarn | 最新版 | ✅ 确认 |

### 基础设施（已确认）
| 组件 | 选定技术 | 确认状态 |
|------|---------|---------|
| **云服务商** | 阿里云 | ✅ 确认 |
| **认证方式** | 简化JWT | ✅ 确认 |
| **容器化** | Docker + Docker Compose | ✅ 确认 |
| **CI/CD** | GitHub Actions | ✅ 确认 |

---

## 🏗️ 项目架构

### Monorepo目录结构
```
InnoLiber/
├── docs/                    # 📚 文档中心
├── backend/                 # 🐍 Python后端服务
├── frontend/                # ⚛️ React前端应用
├── data/                    # 📊 RDR数据资源
├── tools/                   # 🔧 工程工具
├── .env.template           # 🔑 环境变量模板
├── docker-compose.yml      # 🐳 本地开发环境
└── README.md               # 📖 项目说明
```

### 三大核心服务架构
```
┌─────────────────────────────────────────────────────────┐
│                    前端界面层                              │
│              React + Ant Design                       │
└─────────────────────────────────────────────────────────┘
                            │ HTTP API
┌─────────────────────────────────────────────────────────┐
│                   FastAPI 网关层                         │
│              路由 + 认证 + 参数验证                        │
└─────────────────────────────────────────────────────────┘
                            │
        ┌───────────────────┼───────────────────┐
        │                   │                   │
┌───────▼─────┐    ┌────────▼────────┐    ┌────▼─────┐
│  K-TAS服务   │    │   SPG-S服务      │    │ DDC-S服务 │
│   知识分析   │    │   内容生成       │    │  格式合规 │
│              │    │                 │    │          │
│ • 趋势识别   │    │ • LLM调用       │    │ • 规则检查│
│ • 文献聚类   │    │ • 结构化生成     │    │ • 自动修正│
│ • 语义检索   │    │ • 可行性建议     │    │ • 格式输出│
└─────────────┘    └─────────────────┘    └──────────┘
        │                   │                   │
        └───────────────────┼───────────────────┘
                            │
┌─────────────────────────────────────────────────────────┐
│                PostgreSQL数据层                          │
│         proposals + corpus + embeddings              │
│              MVCC + pgvector索引                       │
└─────────────────────────────────────────────────────────┘
```

---

## 📅 开发阶段计划

### 阶段0：基础设施搭建（2-3天）✅ 已完成
**目标**: 完成项目骨架和核心文档

**已完成任务**:
- [x] 技术栈调研与确认
- [x] 项目架构设计
- [x] 开发计划文档创建
- [x] 技术栈详细文档
- [x] 数据库设计文档
- [x] API接口规范文档
- [x] 前端设计原型及方案确认（方案A）
- [x] 创建完整Monorepo目录结构
- [x] 配置Docker开发环境（PostgreSQL + Redis + pgAdmin）
- [x] 环境变量模板创建
- [x] 后端FastAPI框架搭建
- [x] 前端React+TypeScript+Ant Design框架搭建
- [x] 数据库模型定义（User, Proposal）
- [x] 首页完整实现（Dashboard + 相关组件）

**完成日期**: 2025-10-29

**技术成果清单**:

1. **项目结构**
   - Monorepo架构完成
   - 前后端分离结构
   - 文档系统建立

2. **开发环境**
   - Docker Compose配置完成
   - PostgreSQL 16 + pgvector
   - Redis缓存服务
   - pgAdmin数据库管理工具
   - 一键启动脚本（start-dev.bat）

3. **后端基础**
   - FastAPI应用框架: `backend/app/main.py`
   - 核心配置系统: `backend/app/core/config.py`
   - SQLAlchemy数据模型:
     - User模型: `backend/app/models/user.py`
     - Proposal模型: `backend/app/models/proposal.py`
   - Poetry依赖管理: `backend/pyproject.toml`

4. **前端基础**
   - React 18 + TypeScript 5 + Vite配置
   - Ant Design 5集成和主题定制
   - React Router路由系统
   - TypeScript类型系统: `frontend/src/types/index.ts`
   - Axios API服务: `frontend/src/services/api.ts`
   - Zustand状态管理: `frontend/src/store/proposalStore.ts`

5. **首页完整实现**
   - 侧边栏布局: `frontend/src/components/SidebarLayout.tsx`
   - 仪表板页面: `frontend/src/pages/Dashboard.tsx`
   - 标书卡片: `frontend/src/components/ProposalCard.tsx`
   - 状态标签: `frontend/src/components/StatusTag.tsx`
   - 质量评分: `frontend/src/components/QualityScore.tsx`
   - 自定义Hook: `frontend/src/hooks/useProposals.ts`
   - 全局样式: `frontend/src/styles/global.css`

6. **文档体系**
   - 快速启动指南: `QUICK_START.md`
   - 前端设计方案: `docs/design/frontend_prototypes.md`
   - 图标需求清单: `docs/design/icon_requirements.md`
   - 开发计划: `docs/technical/00_development_plan.md`
   - 技术栈文档: `docs/technical/01_tech_stack.md`
   - 数据库设计: `docs/technical/02_database_design.md`
   - API规范: `docs/technical/03_api_specification.md`

### 阶段1：后端API实现（3-5天）🔄 进行中
**目标**: 实现完整的后端API服务，连接前后端

**当前进度**: 数据库模型已完成，正在进行API端点开发

**已完成**:
- [x] User和Proposal数据库模型定义

**进行中**:
- [ ] 配置Alembic数据库迁移工具
- [ ] 生成并执行初始数据库迁移
- [ ] 实现JWT认证系统
- [ ] 实现用户认证API端点
- [ ] 实现标书CRUD API端点
- [ ] 实现统计信息API端点
- [ ] 创建种子数据用于开发测试

**计划任务详情**:

1. **数据库迁移配置**
   - 安装并初始化Alembic
   - 配置数据库连接
   - 生成初始迁移脚本
   - 执行数据库Schema创建

2. **用户认证系统**
   - JWT令牌生成和验证
   - 密码哈希和验证（bcrypt）
   - 认证中间件实现
   - API端点:
     - `POST /api/auth/register` - 用户注册
     - `POST /api/auth/login` - 用户登录
     - `POST /api/auth/refresh` - 刷新令牌
     - `GET /api/auth/me` - 获取当前用户信息

3. **标书管理API**
   - `GET /api/proposals` - 获取标书列表（支持分页、筛选、搜索）
   - `GET /api/proposals/{id}` - 获取标书详情
   - `POST /api/proposals` - 创建新标书
   - `PUT /api/proposals/{id}` - 更新标书
   - `DELETE /api/proposals/{id}` - 删除标书
   - `GET /api/statistics` - 获取用户统计信息

4. **数据填充**
   - 创建测试用户数据
   - 创建示例标书数据（各种状态）
   - 数据填充脚本

**技术实现要点**:
- 使用SQLAlchemy异步ORM
- Pydantic进行数据验证
- 统一错误处理和响应格式
- API速率限制
- CORS配置

**预计完成日期**: 2025-11-01

### 阶段2：前端MVP原型（3-5天）✅ 部分完成
**目标**: 可演示的前端界面（Mock数据）

**依赖条件**:
- ✅ 用户确认React + Ant Design
- ✅ 用户选择设计风格（方案A）

**已完成**:
- [x] 布局框架（侧边栏导航）
- [x] 首页仪表板实现
- [x] 标书卡片组件
- [x] 状态标签和质量评分组件

**待完成核心功能**:
- [ ] 标书创建/编辑表单页面
- [ ] 标书详情查看页面
- [ ] 数据分析展示页面
- [ ] 文献库页面
- [ ] 用户设置页面

### 阶段3：SPG-S内容生成服务（7-10天）⏳ 待开始
**目标**: 实现内容生成核心功能

**依赖条件**:
- 🔄 用户提供DeepSeek API Key

**核心功能**:
- [ ] DeepSeek API集成
- [ ] Prompt工程
- [ ] 结构化内容生成
- [ ] 前后端API联调

### 阶段4：K-TAS文献分析服务（10-14天）⏳ 待开始
**目标**: 实现文献分析功能

**核心功能**:
- [ ] arXiv数据爬取
- [ ] 向量化处理（PyTorch）
- [ ] 文献聚类分析
- [ ] 趋势识别算法

### 阶段5：DDC-S格式合规服务（5-7天）⏳ 待开始
**目标**: 实现格式合规检查

**依赖条件**:
- 🔄 用户提供NSFC申请书样本
- 🔄 用户提供BIT论文规范文档

**核心功能**:
- [ ] 格式规则引擎
- [ ] 自动检查算法
- [ ] 修改建议生成

### 阶段6：测试与优化（持续）
**目标**: 确保产品质量

**核心内容**:
- [ ] 单元测试（pytest + vitest）
- [ ] 集成测试（API端到端）
- [ ] 性能优化
- [ ] 安全检查

---

## 🎨 前端设计方案确认

### ✅ 已选定设计方案：方案A - 学术专业风

**确认日期**: 2025-10-29
**参考文档**: `docs/design/frontend_prototypes.md`

#### 设计风格特点
- **整体风格**: 学术专业风格，注重信息层次和内容可读性
- **色彩方案**:
  - 主色：深蓝 `#1E3A8A` - 代表专业、信任、学术
  - 辅助色：
    - 成功：绿色 `#10B981`
    - 警告：金色 `#F59E0B`
    - 错误：红色 `#EF4444`
    - 信息：天蓝 `#3B82F6`
  - 背景：浅灰 `#F9FAFB`，营造舒适的阅读环境
- **设计原则**: 遵循CRAP设计原则
  - **Contrast** (对比): 清晰的视觉层次
  - **Repetition** (重复): 统一的设计元素
  - **Alignment** (对齐): 网格化布局
  - **Proximity** (亲密性): 相关信息分组
- **UI组件库**: Ant Design 5.x
- **圆角设计**:
  - 卡片：8px
  - 按钮/输入框：6px
- **阴影效果**: 柔和的卡片阴影，hover时增强

#### 核心页面布局结构

1. **侧边栏导航布局** (`SidebarLayout.tsx`)
   - 固定左侧导航栏，宽度200px
   - 顶部Logo和系统名称
   - 主要菜单项：标书管理、数据分析、文献库、设置
   - 底部用户信息和退出登录

2. **首页/仪表板** (`Dashboard.tsx`)
   - 顶部统计卡片区域（4列）
   - 搜索和筛选功能栏
   - 标书卡片网格展示（响应式）
   - 底部分页控制

3. **标书卡片组件** (`ProposalCard.tsx`)
   - 标题和状态标签
   - 元信息（资助机构、申请金额、期限）
   - 质量评分可视化（星级+进度条）
   - 操作按钮组（继续编辑/查看详情/删除）

#### 图标使用规范
- **图标库**: `@ant-design/icons`
- **图标清单**: 详见 `docs/design/icon_requirements.md`
- **使用原则**: 保持图标风格统一，语义明确

**当前状态**: ✅ 设计方案已确认并实施

---

## 🔑 环境配置

### API密钥需求
用户将提供以下API Key：
- **DeepSeek API Key**: 用于LLM调用
- **阿里云访问密钥**: 用于部署

### 环境变量模板
将创建 `.env.template` 文件，包含：
- 数据库连接信息
- API密钥占位符
- 服务端口配置
- JWT密钥配置

---

## 📊 里程碑时间线

| 时间点 | 里程碑 | 交付成果 | 状态 |
|--------|--------|----------|------|
| **2025-10-29** | 阶段0完成 | 项目骨架+文档+首页 | ✅ 已完成 |
| **2025-11-01** | 阶段1完成 | 后端API服务 | 🔄 进行中 |
| **2025-11-05** | 阶段2完成 | 前端完整页面 | ⏳ 待开始 |
| **2025-11-15** | 阶段3完成 | SPG-S内容生成 | ⏳ 待开始 |
| **2025-11-29** | 阶段4完成 | K-TAS文献分析 | ⏳ 待开始 |
| **2025-12-06** | 阶段5完成 | DDC-S格式检查 | ⏳ 待开始 |
| **2025-12-13** | **MVP 1.0** | 完整可用产品 | ⏳ 待开始 |

---

## 🎯 成功标准

### MVP 1.0成功标准
1. **功能完整性**
   - [ ] 用户能创建并编辑标书
   - [ ] 系统能生成结构化内容建议
   - [ ] 系统能进行格式合规检查
   - [ ] 系统能提供文献趋势分析

2. **技术指标**
   - [ ] API响应时间 < 2秒
   - [ ] 前端首屏加载 < 3秒
   - [ ] 支持并发用户数 ≥ 50
   - [ ] 数据库事务ACID保证

3. **用户体验**
   - [ ] 界面响应式设计
   - [ ] 操作流程清晰直观
   - [ ] 错误提示友好
   - [ ] 支持中文内容处理

---

## 🚀 当前工作与下一步行动

### ✅ 已完成（2025-10-29）
1. **阶段0 - 基础设施搭建**
   - 完整的Monorepo项目结构
   - Docker开发环境配置
   - 前后端框架搭建
   - 数据库模型定义
   - 首页完整实现（包括所有相关组件）
   - 完整的技术文档体系

### 🔄 正在进行（阶段1 - 后端API实现）
1. **数据库迁移配置**
   - 当前状态：数据模型已定义，等待配置Alembic
   - 下一步：安装Alembic并生成初始迁移

2. **API端点开发**
   - 认证系统：用户注册、登录、令牌验证
   - 标书管理：CRUD操作和统计信息
   - 种子数据：测试用户和示例标书

### ⏳ 待开始（按优先级排序）
1. **完成阶段1** - 后端API实现（预计2025-11-01完成）
2. **阶段2剩余部分** - 其他前端页面（标书编辑、详情、分析等）
3. **阶段3** - SPG-S内容生成服务集成
4. **阶段4** - K-TAS文献分析服务
5. **阶段5** - DDC-S格式合规检查

### 等待用户提供
- 🔄 DeepSeek API Key（阶段3需要）
- 🔄 NSFC申请书样本文档（阶段5需要）
- 🔄 BIT论文规范文档（阶段5需要）

---

## 📝 开发记录

### 2025-10-29
**主要成果**:
- ✅ 完成阶段0所有任务
- ✅ 确认前端设计方案为方案A（学术专业风）
- ✅ 实现首页Dashboard及所有相关组件
- ✅ 创建User和Proposal数据库模型
- ✅ 更新开发计划文档，记录当前进度

**技术亮点**:
- Monorepo架构设计合理，前后端分离清晰
- TypeScript类型系统完善
- Ant Design主题定制符合设计风格
- 组件化设计良好，可复用性强

**下一步计划**:
- 继续推进阶段1：后端API实现
- 配置Alembic数据库迁移
- 实现JWT认证系统
- 创建API端点和种子数据

---

**文档状态**: 📝 持续更新
**负责人**: Claude Code
**审核人**: 项目所有者

---

*本文档将随开发进度持续更新，确保团队对项目状态的一致理解。*