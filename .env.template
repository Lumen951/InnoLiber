# ============================================
# InnoLiber 环境配置文件
# ============================================
#
# 使用说明:
# 1. 复制此文件为 .env
# 2. 填写实际的配置值
# 3. 不要将 .env 文件提交到Git仓库
#
# ============================================

# ============================================
# 应用基础配置
# ============================================

# 应用环境: development, staging, production
ENV=development

# 应用名称
APP_NAME=InnoLiber

# 应用版本
APP_VERSION=1.0.0

# 后端服务地址
API_HOST=0.0.0.0
API_PORT=8000

# 前端服务地址
FRONTEND_URL=http://localhost:5173

# 允许的跨域来源（CORS）
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# ============================================
# 数据库配置（PostgreSQL）
# ============================================

# 数据库主机
DATABASE_HOST=localhost

# 数据库端口
DATABASE_PORT=5432

# 数据库名称
DATABASE_NAME=innolibr

# 数据库用户名
DATABASE_USER=innolibr

# 数据库密码（请修改为强密码）
DATABASE_PASSWORD=your_strong_password_here

# 完整数据库URL（如果上面已填写，会自动生成）
# DATABASE_URL=postgresql+asyncpg://innolibr:your_password@localhost:5432/innolibr

# 数据库连接池配置
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30
DATABASE_POOL_PRE_PING=true
DATABASE_POOL_RECYCLE=3600

# ============================================
# JWT认证配置
# ============================================

# JWT密钥（生产环境请使用强随机字符串）
# 生成方式: openssl rand -hex 32
JWT_SECRET_KEY=your_jwt_secret_key_here_please_change_in_production

# JWT算法
JWT_ALGORITHM=HS256

# Access Token过期时间（秒）
JWT_ACCESS_TOKEN_EXPIRE=86400

# Refresh Token过期时间（秒）
JWT_REFRESH_TOKEN_EXPIRE=2592000

# ============================================
# DeepSeek API配置
# ============================================

# DeepSeek API密钥（请在 https://platform.deepseek.com/ 获取）
DEEPSEEK_API_KEY=sk-your_deepseek_api_key_here

# DeepSeek API Base URL
DEEPSEEK_API_BASE_URL=https://api.deepseek.com

# 默认使用的模型
DEEPSEEK_DEFAULT_MODEL=deepseek-chat

# 推理模型（用于复杂任务）
DEEPSEEK_REASONING_MODEL=deepseek-reasoner

# API超时时间（秒）
DEEPSEEK_API_TIMEOUT=60

# API最大重试次数
DEEPSEEK_API_MAX_RETRIES=3

# ============================================
# Redis配置（可选，用于缓存和任务队列）
# ============================================

# Redis主机
REDIS_HOST=localhost

# Redis端口
REDIS_PORT=6379

# Redis密码（如果有）
REDIS_PASSWORD=

# Redis数据库编号
REDIS_DB=0

# ============================================
# 文件上传配置
# ============================================

# 文件上传目录
UPLOAD_DIR=./uploads

# 最大文件大小（MB）
MAX_FILE_SIZE_MB=10

# 允许的文件类型
ALLOWED_FILE_TYPES=pdf,doc,docx,txt

# ============================================
# 日志配置
# ============================================

# 日志级别: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# 日志文件路径
LOG_FILE=./logs/app.log

# 日志最大文件大小（MB）
LOG_MAX_SIZE_MB=100

# 日志备份文件数量
LOG_BACKUP_COUNT=10

# ============================================
# 阿里云配置（生产环境）
# ============================================

# 阿里云AccessKey ID
ALIYUN_ACCESS_KEY_ID=your_aliyun_access_key_id_here

# 阿里云AccessKey Secret
ALIYUN_ACCESS_KEY_SECRET=your_aliyun_access_key_secret_here

# 阿里云区域
ALIYUN_REGION=cn-beijing

# 阿里云OSS Bucket名称
ALIYUN_OSS_BUCKET=innolibr-prod

# 阿里云OSS Endpoint
ALIYUN_OSS_ENDPOINT=https://oss-cn-beijing.aliyuncs.com

# ============================================
# RDR（知识库）配置
# ============================================

# RDR数据存储路径
RDR_DATA_PATH=./data

# 向量维度（nvidia/NV-Embed-v2）
EMBEDDING_DIMENSION=1536

# 向量索引类型: ivfflat, hnsw
VECTOR_INDEX_TYPE=ivfflat

# IVFFlat列表数量
IVFFLAT_LISTS=100

# ============================================
# 任务队列配置（Celery，可选）
# ============================================

# Celery Broker URL
CELERY_BROKER_URL=redis://localhost:6379/1

# Celery Result Backend
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# ============================================
# 监控与性能配置
# ============================================

# 是否启用性能监控
ENABLE_PROFILING=false

# Sentry DSN（错误追踪，可选）
SENTRY_DSN=

# ============================================
# 邮件配置（用户验证、通知）
# ============================================

# SMTP服务器
SMTP_HOST=smtp.example.com

# SMTP端口
SMTP_PORT=587

# SMTP用户名
SMTP_USER=noreply@innolibr.com

# SMTP密码
SMTP_PASSWORD=your_smtp_password_here

# 发件人邮箱
MAIL_FROM=noreply@innolibr.com

# 发件人名称
MAIL_FROM_NAME=InnoLiber

# ============================================
# 开发工具配置
# ============================================

# 是否启用自动重载
AUTO_RELOAD=true

# 是否显示详细错误信息
DEBUG_MODE=true

# 是否启用SQL日志
SQL_ECHO=false

# ============================================
# 限流配置
# ============================================

# 限流: 每分钟请求次数
RATE_LIMIT_PER_MINUTE=100

# 生成服务限流: 每分钟请求次数
GENERATION_RATE_LIMIT=10

# 搜索服务限流: 每分钟请求次数
SEARCH_RATE_LIMIT=30

# ============================================
# 前端环境变量（供Vite使用）
# ============================================

# API Base URL（前端调用后端接口的地址）
VITE_API_BASE_URL=http://localhost:8000/v1

# WebSocket URL（用于实时通知）
VITE_WS_URL=ws://localhost:8000/ws

# 是否启用Mock数据
VITE_USE_MOCK=false

# 应用标题
VITE_APP_TITLE=InnoLiber - 智能科研助理

# ============================================
# 安全配置
# ============================================

# 是否仅允许HTTPS
FORCE_HTTPS=false

# Session密钥
SESSION_SECRET_KEY=your_session_secret_here

# 密码最小长度
PASSWORD_MIN_LENGTH=8

# 密码是否需要特殊字符
PASSWORD_REQUIRE_SPECIAL_CHAR=true

# ============================================
# 备份配置
# ============================================

# 数据库备份目录
BACKUP_DIR=./backups

# 备份保留天数
BACKUP_RETENTION_DAYS=30

# ============================================
# 测试环境配置
# ============================================

# 测试数据库URL
TEST_DATABASE_URL=postgresql+asyncpg://test_user:test_pass@localhost:5432/innolibr_test

# 是否在测试后清理数据
TEST_CLEANUP=true